# Unit 생성 무결점 워크플로우
## 🎯 **오류 없는 완벽한 Unit 생성 시스템**

---

## 📋 **워크플로우 개요**

이 워크플로우는 Unit 생성 시 발생할 수 있는 모든 오류를 사전에 방지하고, 체계적인 단계별 진행을 통해 스트레스 없는 완벽한 결과를 보장합니다.

---

## 🔍 **1단계: 사전 검증 (필수!)**

### **1.1 데이터 검증**
```bash
# JSON 파일 존재 확인
ls data/unit[번호].json

# JSON 검증 실행 (반드시 통과해야 함)
python json_validator.py data/unit[번호].json
```

**✅ 검증 결과 확인**
- 총 단어 수: [숫자]개
- 오류 수: 0개 (반드시!)
- 중복 단어: 0개 (반드시!)

### **1.2 템플릿 상태 확인**
- [ ] 이전 Unit 폴더 구조 완벽
- [ ] 이전 Unit 게임 기능 정상
- [ ] 최신 수정사항 반영

### **1.3 환경 준비**
- [ ] 로컬 서버 실행 가능
- [ ] Git 상태 정상
- [ ] 필요한 도구 준비 완료

---

## 🚀 **2단계: 체계적 생성**

### **2.1 폴더 생성**
```bash
# 템플릿 복사
xcopy "unit[이전번호]" "unit[새번호]" /E /I /H

# 생성 확인
dir unit[새번호]
```

### **2.2 데이터 파일 관리**
```bash
# 새 Unit 데이터 복사
copy data\unit[새번호].json unit[새번호]\data\unit[새번호].json

# 불필요한 데이터 삭제
del unit[새번호]\data\unit*.json

# 새 Unit 데이터만 복사
copy data\unit[새번호].json unit[새번호]\data\unit[새번호].json
```

### **2.3 파일 수정 (체계적 진행)**

#### **A. index.html 수정**
```html
<!-- 1. 제목 변경 -->
<h1 class="game-title">TOEIC WORD 1600 / <span class="unit-text">Unit [번호]</span></h1>

<!-- 2. 캐시 버전 업데이트 -->
<link rel="stylesheet" href="./style.css?v=1.[버전]">
<script src="./game.js?v=1.[버전]"></script>

<!-- 3. 메타 태그 업데이트 -->
<meta http-equiv="Last-Modified" content="Mon, 05 Sep 2025 [시간]:00:00 GMT">
```

#### **B. game.js 수정 (중요!)**
```javascript
// 1. 기본 유닛 변경
let selectedUnit = 'unit[번호]';

// 2. 데이터 파일 경로 수정
const file = isLocal ? './data/unit[번호].json' : '/game/unit[번호]/data/unit[번호].json';

// 3. 에셋 경로 수정 (모든 위치)
const assetsPath = isLocal ? './assets/' : '/game/unit[번호]/assets/';

// 4. getLatestUnitJsonFile() 함수 수정
function getLatestUnitJsonFile() {
  return fetch('/game/unit[번호]/data/unit[번호].json')
    .then(r => r.ok ? r.json() : null)
    .catch(() => null)
    .then(data => {
      if (!data) throw new Error('단어 데이터를 불러오지 못했습니다.');
      return data;
    });
}

// 5. 모든 로그 메시지 수정
console.log('🔍 Unit [번호]: 단어 데이터 로딩 시작:', file);
console.log('📡 Unit [번호]: 서버 응답:', response.status, response.ok);
console.log('✅ Unit [번호]: 데이터 로드 성공! 단어 수:', data.length);
console.log('📝 Unit [번호]: 첫 번째 단어:', data[0]);
console.error('❌ Unit [번호]: 데이터 로드 실패:', err);
alert('Unit [번호] 단어 데이터를 불러오지 못했습니다: ' + err.message);
```

### **2.4 README.md 생성**
- Unit 전용 문서 작성
- 단어 카테고리별 분류
- 게임 특징 및 접속 방법 포함

---

## 🧪 **3단계: 체계적 테스트**

### **3.1 서버 실행**
```bash
python -m http.server 8000
```

### **3.2 올바른 URL 접속**
```
http://localhost:8000/unit[번호]/
```
**⚠️ 중요**: 반드시 `/unit[번호]/`로 끝나야 함!

### **3.3 브라우저 캐시 문제 해결**
1. **강제 새로고침**: `Ctrl + F5`
2. **개발자 도구**: `F12` → Network 탭 → "Disable cache" 체크
3. **시크릿 모드**: `Ctrl + Shift + N` (Chrome)

### **3.4 기능 테스트**
- [ ] 게임 제목 정확히 표시
- [ ] 단어 데이터 정상 로드
- [ ] UFO 생성 및 움직임
- [ ] 격추 기능 정상
- [ ] 점수 시스템 작동
- [ ] 타이머 기능
- [ ] 보너스 게임
- [ ] TTS 기능
- [ ] 사운드 효과

---

## 📤 **4단계: 안전한 배포**

### **4.1 Git 스테이징**
```bash
git add unit[번호]/
git add data/unit[번호].json
```

### **4.2 커밋**
```bash
git commit -m "Unit [번호] 게임 생성 및 배포 완료

- Unit [번호] 폴더 구조 생성 (Unit [이전번호] 템플릿 기반)
- [단어 수]개 단어 데이터 포함 ([주제] 관련)
- 게임 엔진 및 UI Unit [번호] 전용으로 수정
- 단어 로딩 경로 및 에셋 경로 수정
- README.md 파일 생성
- 로컬 테스트 완료"
```

### **4.3 푸시**
```bash
git push origin main
```

### **4.4 배포 확인**
- **온라인 URL**: `https://word1600.github.io/game/unit[번호]/`
- **배포 시간**: 1-5분 소요
- **모든 기능 정상 작동 확인**

---

## ⚠️ **오류 방지 체크리스트**

### **데이터 관련 오류 방지**
- [ ] JSON 검증 통과 (오류 0개)
- [ ] 단어 수 확인
- [ ] 중복 단어 없음
- [ ] 형식 오류 없음

### **경로 관련 오류 방지**
- [ ] 모든 파일에서 유닛 번호 일치
- [ ] 에셋 경로 정확성
- [ ] 데이터 파일 경로 정확성
- [ ] 함수 내부 참조 정확성

### **캐시 관련 오류 방지**
- [ ] 파일 버전 업데이트
- [ ] 메타 태그 업데이트
- [ ] 강제 새로고침 실행
- [ ] 개발자 도구 캐시 비활성화

### **접속 관련 오류 방지**
- [ ] 올바른 URL 사용
- [ ] 로컬 서버 정상 실행
- [ ] 네트워크 연결 확인
- [ ] 브라우저 호환성 확인

---

## 🎯 **성공 기준**

### **기능적 완성도**
- [ ] 모든 게임 기능 정상 작동
- [ ] 단어 데이터 정상 로드
- [ ] 사용자 인터페이스 완성

### **기술적 완성도**
- [ ] 코드 오류 없음
- [ ] 경로 참조 정확성
- [ ] 브라우저 호환성

### **배포 완성도**
- [ ] 온라인 접속 가능
- [ ] 모든 에셋 정상 로드
- [ ] 사용자 경험 최적화

---

## 📝 **문서화**

### **생성 보고서 작성**
- 작업 일시 및 목표
- 완료된 작업 목록
- 게임 정보 및 특징
- 배포 정보
- 기술적 수정 사항
- 발생했던 문제와 해결 방법
- 다음 Unit 생성 시 참고사항

### **워크플로우 업데이트**
- 새로운 문제 해결 방법 추가
- 체크리스트 개선
- 가이드 보완

---

## 🚀 **최종 체크리스트**

### **생성 전**
- [ ] 데이터 검증 완료
- [ ] 템플릿 상태 확인
- [ ] 환경 준비 완료

### **생성 중**
- [ ] 폴더 구조 생성
- [ ] 파일 수정 완료
- [ ] 데이터 관리 완료
- [ ] 문서 생성 완료

### **테스트**
- [ ] 올바른 URL 접속
- [ ] 캐시 문제 해결
- [ ] 기능 테스트 완료

### **배포**
- [ ] Git 작업 완료
- [ ] 온라인 배포 확인
- [ ] 문서화 완료

---

**🎉 이 워크플로우를 따라하면 오류 없는 완벽한 Unit 생성이 가능합니다!**

**작성일**: 2025년 9월 5일  
**목적**: 무결점 Unit 생성 시스템  
**상태**: 완료


